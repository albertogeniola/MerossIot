

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>HTTP Client &mdash; MerossIot Library  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  

  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
        <script data-ad-client="ca-pub-9110025741700767" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="MerossManager" href="manager.html" />
    <link rel="prev" title="API Reference" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="../index.html" class="icon icon-home"> MerossIot Library
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick-start.html">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common-gotchas.html">Common gotchas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced-topics.html">Advanced topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../meross-protocol.html">Meross Protocol Inspection</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">HTTP Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="manager.html">MerossManager</a></li>
<li class="toctree-l2"><a class="reference internal" href="creds.html">MerossCloudCredentials</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller/device/base.html">BaseDevice</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller/device/generic.html">GenericSubDevice</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller/device/hub.html">HubDevice</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller/device/channel.html">ChannelInfo</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller/device/channel.html">ChannelInfo</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller/mixins/consumption.html">ConsumptionXMixin</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller/mixins/electricity.html">ElectricityMixin</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller/mixins/garage.html">GarageOpenerMixin</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller/mixins/hub.html">HubMixn</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller/mixins/hub.html#hubmts100mixin">HubMts100Mixin</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller/mixins/light.html">LightMixin</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller/mixins/spray.html">SprayMixin</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller/mixins/system.html">SystemAllMixin</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller/mixins/system.html#systemonlinemixin">SystemOnlineMixin</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller/mixins/toggle.html">ToggleXMixin</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller/mixins/toggle.html#togglemixin">ToggleMixin</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller/subdevice/sensor.html">Ms100Sensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller/subdevice/valve.html">Mts100v3Valve</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MerossIot Library</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">API Reference</a> &raquo;</li>
        
      <li>HTTP Client</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/api-reference/http.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-meross_iot.http_api">
<span id="http-client"></span><h1>HTTP Client<a class="headerlink" href="#module-meross_iot.http_api" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="meross_iot.http_api.ErrorCodes">
<em class="property">class </em><code class="sig-prename descclassname">meross_iot.http_api.</code><code class="sig-name descname">ErrorCodes</code><a class="headerlink" href="#meross_iot.http_api.ErrorCodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Status codes returned by the Meross HTTP APIs</p>
<dl class="attribute">
<dt id="meross_iot.http_api.ErrorCodes.CODE_BAD_PASSWORD_FORMAT">
<code class="sig-name descname">CODE_BAD_PASSWORD_FORMAT</code><em class="property"> = 1006</em><a class="headerlink" href="#meross_iot.http_api.ErrorCodes.CODE_BAD_PASSWORD_FORMAT" title="Permalink to this definition">¶</a></dt>
<dd><p>Bad password format</p>
</dd></dl>

<dl class="attribute">
<dt id="meross_iot.http_api.ErrorCodes.CODE_DISABLED_OR_DELETED_ACCOUNT">
<code class="sig-name descname">CODE_DISABLED_OR_DELETED_ACCOUNT</code><em class="property"> = 1003</em><a class="headerlink" href="#meross_iot.http_api.ErrorCodes.CODE_DISABLED_OR_DELETED_ACCOUNT" title="Permalink to this definition">¶</a></dt>
<dd><p>This account has been disabled or deleted</p>
</dd></dl>

<dl class="attribute">
<dt id="meross_iot.http_api.ErrorCodes.CODE_GENERIC_ERROR">
<code class="sig-name descname">CODE_GENERIC_ERROR</code><em class="property"> = 5000</em><a class="headerlink" href="#meross_iot.http_api.ErrorCodes.CODE_GENERIC_ERROR" title="Permalink to this definition">¶</a></dt>
<dd><p>Unknown or generic error</p>
</dd></dl>

<dl class="attribute">
<dt id="meross_iot.http_api.ErrorCodes.CODE_INVALID_EMAIL">
<code class="sig-name descname">CODE_INVALID_EMAIL</code><em class="property"> = 1005</em><a class="headerlink" href="#meross_iot.http_api.ErrorCodes.CODE_INVALID_EMAIL" title="Permalink to this definition">¶</a></dt>
<dd><p>Invalid email address</p>
</dd></dl>

<dl class="attribute">
<dt id="meross_iot.http_api.ErrorCodes.CODE_MISSING_PASSWORD">
<code class="sig-name descname">CODE_MISSING_PASSWORD</code><em class="property"> = 1001</em><a class="headerlink" href="#meross_iot.http_api.ErrorCodes.CODE_MISSING_PASSWORD" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrong or missing password</p>
</dd></dl>

<dl class="attribute">
<dt id="meross_iot.http_api.ErrorCodes.CODE_NO_ERROR">
<code class="sig-name descname">CODE_NO_ERROR</code><em class="property"> = 0</em><a class="headerlink" href="#meross_iot.http_api.ErrorCodes.CODE_NO_ERROR" title="Permalink to this definition">¶</a></dt>
<dd><p>Not an error</p>
</dd></dl>

<dl class="attribute">
<dt id="meross_iot.http_api.ErrorCodes.CODE_TOKEN_ERROR">
<code class="sig-name descname">CODE_TOKEN_ERROR</code><em class="property"> = 1022</em><a class="headerlink" href="#meross_iot.http_api.ErrorCodes.CODE_TOKEN_ERROR" title="Permalink to this definition">¶</a></dt>
<dd><p>Token error</p>
</dd></dl>

<dl class="attribute">
<dt id="meross_iot.http_api.ErrorCodes.CODE_TOKEN_EXPIRED">
<code class="sig-name descname">CODE_TOKEN_EXPIRED</code><em class="property"> = 1200</em><a class="headerlink" href="#meross_iot.http_api.ErrorCodes.CODE_TOKEN_EXPIRED" title="Permalink to this definition">¶</a></dt>
<dd><p>Token has expired</p>
</dd></dl>

<dl class="attribute">
<dt id="meross_iot.http_api.ErrorCodes.CODE_TOKEN_INVALID">
<code class="sig-name descname">CODE_TOKEN_INVALID</code><em class="property"> = 1019</em><a class="headerlink" href="#meross_iot.http_api.ErrorCodes.CODE_TOKEN_INVALID" title="Permalink to this definition">¶</a></dt>
<dd><p>Token expired</p>
</dd></dl>

<dl class="attribute">
<dt id="meross_iot.http_api.ErrorCodes.CODE_TOO_MANY_TOKENS">
<code class="sig-name descname">CODE_TOO_MANY_TOKENS</code><em class="property"> = 1301</em><a class="headerlink" href="#meross_iot.http_api.ErrorCodes.CODE_TOO_MANY_TOKENS" title="Permalink to this definition">¶</a></dt>
<dd><p>Too many tokens have been issued</p>
</dd></dl>

<dl class="attribute">
<dt id="meross_iot.http_api.ErrorCodes.CODE_UNEXISTING_ACCOUNT">
<code class="sig-name descname">CODE_UNEXISTING_ACCOUNT</code><em class="property"> = 1002</em><a class="headerlink" href="#meross_iot.http_api.ErrorCodes.CODE_UNEXISTING_ACCOUNT" title="Permalink to this definition">¶</a></dt>
<dd><p>Account does not exist</p>
</dd></dl>

<dl class="attribute">
<dt id="meross_iot.http_api.ErrorCodes.CODE_WRONG_CREDENTIALS">
<code class="sig-name descname">CODE_WRONG_CREDENTIALS</code><em class="property"> = 1004</em><a class="headerlink" href="#meross_iot.http_api.ErrorCodes.CODE_WRONG_CREDENTIALS" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrong email or password</p>
</dd></dl>

<dl class="attribute">
<dt id="meross_iot.http_api.ErrorCodes.CODE_WRONG_EMAIL">
<code class="sig-name descname">CODE_WRONG_EMAIL</code><em class="property"> = 1008</em><a class="headerlink" href="#meross_iot.http_api.ErrorCodes.CODE_WRONG_EMAIL" title="Permalink to this definition">¶</a></dt>
<dd><p>This email is not registered</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="meross_iot.http_api.MerossHttpClient">
<em class="property">class </em><code class="sig-prename descclassname">meross_iot.http_api.</code><code class="sig-name descname">MerossHttpClient</code><span class="sig-paren">(</span><em class="sig-param">cloud_credentials: meross_iot.model.credentials.MerossCloudCreds</em>, <em class="sig-param">api_base_url: str = 'https://iot.meross.com'</em>, <em class="sig-param">http_proxy: Optional[str] = None</em><span class="sig-paren">)</span><a class="headerlink" href="#meross_iot.http_api.MerossHttpClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility class for dealing with Meross HTTP API.
This class simplifies the usage of the Meross HTTP API providing login, logout and device listing API.</p>
<dl class="method">
<dt id="meross_iot.http_api.MerossHttpClient.async_from_user_password">
<em class="property">async classmethod </em><code class="sig-name descname">async_from_user_password</code><span class="sig-paren">(</span><em class="sig-param">email: str</em>, <em class="sig-param">password: str</em>, <em class="sig-param">api_base_url: str = 'https://iot.meross.com'</em>, <em class="sig-param">http_proxy: Optional[str] = None</em><span class="sig-paren">)</span> &#x2192; meross_iot.http_api.MerossHttpClient<a class="headerlink" href="#meross_iot.http_api.MerossHttpClient.async_from_user_password" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a MerossHttpClient using username/password combination.
In any case, the login will generate a token, which might expire at any time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>email</strong> – Meross account email</p></li>
<li><p><strong>password</strong> – Meross account password</p></li>
<li><p><strong>api_base_url</strong> – Meross API base URL</p></li>
<li><p><strong>http_proxy</strong> – Optional http proxy to use when issuing the requests</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>an instance of <cite>MerossHttpClient</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="meross_iot.http_api.MerossHttpClient.async_invalidate_credentials">
<em class="property">async </em><code class="sig-name descname">async_invalidate_credentials</code><span class="sig-paren">(</span><em class="sig-param">creds: meross_iot.model.credentials.MerossCloudCreds</em><span class="sig-paren">)</span><a class="headerlink" href="#meross_iot.http_api.MerossHttpClient.async_invalidate_credentials" title="Permalink to this definition">¶</a></dt>
<dd><p>Class method used to invalidate credentials without logging in with a full MerossHttpClient.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>creds</strong> – <cite>MerossCloudCredentials</cite> as returned by <cite>async_login()</cite> or <cite>async_from_user_password()</cite></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>API response data</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="meross_iot.http_api.MerossHttpClient.async_list_devices">
<em class="property">async </em><code class="sig-name descname">async_list_devices</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span> &#x2192; List[meross_iot.model.http.device.HttpDeviceInfo]<a class="headerlink" href="#meross_iot.http_api.MerossHttpClient.async_list_devices" title="Permalink to this definition">¶</a></dt>
<dd><p>Asks to the HTTP api to list the Meross device belonging to the given user account.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of <cite>HttpDeviceInfo</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="meross_iot.http_api.MerossHttpClient.async_list_hub_subdevices">
<em class="property">async </em><code class="sig-name descname">async_list_hub_subdevices</code><span class="sig-paren">(</span><em class="sig-param">hub_id: str</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span> &#x2192; List[meross_iot.model.http.subdevice.HttpSubdeviceInfo]<a class="headerlink" href="#meross_iot.http_api.MerossHttpClient.async_list_hub_subdevices" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the sub-devices associated to the given hub.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>hub_id</strong> – Meross native UUID of the HUB</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of <cite>HttpSubdeviceInfo</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="meross_iot.http_api.MerossHttpClient.async_login">
<em class="property">async classmethod </em><code class="sig-name descname">async_login</code><span class="sig-paren">(</span><em class="sig-param">email: str</em>, <em class="sig-param">password: str</em>, <em class="sig-param">creds_env_var_name: str = '__MEROSS_CREDS'</em>, <em class="sig-param">api_base_url: str = 'https://iot.meross.com'</em>, <em class="sig-param">http_proxy: Optional[str] = None</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span> &#x2192; meross_iot.model.credentials.MerossCloudCreds<a class="headerlink" href="#meross_iot.http_api.MerossHttpClient.async_login" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs the login against the Meross HTTP endpoint.
This api returns a MerossCloudCreds object, which contains a token.
Be cautious when invoking this API: asking for too many tokens as the Meross HTTP API might refuse
to issue more tokens. Instead, you should keep using the same issued token when possible, possibly
storing it across sessions. When you are done using a specific token, be sure to invoke logout
to invalidate it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>email</strong> – Meross account email</p></li>
<li><p><strong>password</strong> – Meross account password</p></li>
<li><p><strong>creds_env_var_name</strong> – If set, makes thi method store the obtained login-credentials in the specified env variable.</p></li>
</ul>
</dd>
</dl>
<p>indicate which env variables stores such credentials
:param api_base_url: Meross API base url
:param http_proxy: Optional http proxy to use when to performing the request</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <cite>MerossCloudCreds</cite> object</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="meross_iot.http_api.MerossHttpClient.async_logout">
<em class="property">async </em><code class="sig-name descname">async_logout</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#meross_iot.http_api.MerossHttpClient.async_logout" title="Permalink to this definition">¶</a></dt>
<dd><p>Invalidates the credentials stored in this object.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>API response data</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="meross_iot.http_api.MerossHttpClient.cloud_credentials">
<em class="property">property </em><code class="sig-name descname">cloud_credentials</code><a class="headerlink" href="#meross_iot.http_api.MerossHttpClient.cloud_credentials" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the meross credentials returned by the the HTTP Api
:return:</p>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="manager.html" class="btn btn-neutral float-right" title="MerossManager" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="API Reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Alberto Geniola.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-10387182-6', 'auto');
    
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>